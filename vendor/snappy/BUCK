remote_file(
    name = 'fetch',
    url = 'https://github.com/google/snappy/archive/1.1.7.zip',
    sha1 = '43d6626c62c961171b301eb934fd05fc26ae28a8',
    type = 'exploded_zip'
)

genrule(
    name = "build",
    srcs = ['$(location //:fetch)'],
    cmd = 'cd snappy-1.1.7 && mkdir -p build && cd build && cmake ../ && make',
    out = 'snappy-1.1.7'
)

# Snappy
prebuilt_cxx_library(
    name = 'snappy',
    header_dirs = [':build', ':build/build'],
    static_lib = '$(location //:build)/build/libsnappy.a'
)