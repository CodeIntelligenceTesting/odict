remote_file(
    name = 'get',
    url = 'https://dl.bintray.com/boostorg/release/1.66.0/source/boost_1_66_0.zip',
    sha1 = '68660effcb94170af7ed2e8871749eee9a031103',
    type = 'exploded_zip',
    visibility = ['//vendor:boost']
)

genrule(
    name = 'build',
    srcs = [':get'],
    cmd = 'cp -r $SRCS/* $OUT && cd $OUT/boost_1_66_0 && ./bootstrap.sh --prefix=./ && ./b2 install link=static',
    out = '.',
    visibility = [
        '//vendor:boost',
        '//vendor/boost/filesystem:get-lib',
        '//vendor/boost/system:get-lib'
    ]
)

genrule(
    name = 'get-headers',
    srcs = [':build'],
    cmd = 'find $SRCS/boost_1_66_0/include -name *.h | xargs -I FILE cp FILE $OUT',
    out = '.',
    visibility = ['//vendor:boost']
)

prebuilt_cxx_library(
    name = 'boost-headers',
    header_only = True,
    header_dirs = [':get-headers'],
    visibility = ['//vendor:boost']
)
